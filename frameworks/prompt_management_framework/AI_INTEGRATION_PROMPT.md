# AI æ•´åˆæŒ‡ä»¤ - Prompt ç®¡ç†ç³»çµ±

> ğŸ“‹ è¤‡è£½æœ¬æª”æ¡ˆçš„æŒ‡ä»¤ï¼Œç›´æ¥æä¾›çµ¦ AI åŠ©æ‰‹ä½¿ç”¨

---

## ğŸ¤– å®Œæ•´æ•´åˆæŒ‡ä»¤ï¼ˆè¤‡è£½ä½¿ç”¨ï¼‰

```
è«‹å¹«æˆ‘å°‡ã€ŒPrompt ç®¡ç†ç³»çµ±ã€æ•´åˆåˆ°æˆ‘çš„å°ˆæ¡ˆä¸­ã€‚

å°ˆæ¡ˆè³‡è¨Šï¼š
- å°ˆæ¡ˆè·¯å¾‘ï¼š[å¡«å…¥ä½ çš„å°ˆæ¡ˆè·¯å¾‘]
- Workflow é¡å‹ï¼š[å¤šéšæ®µ AI å ±å‘Šç”Ÿæˆ / å…§å®¹åˆ†æ / æ•¸æ“šè™•ç†]
- Stage è…³æœ¬ä½ç½®ï¼š[å¡«å…¥è…³æœ¬ç›®éŒ„ï¼Œå¦‚ scripts/stages/]
- æ˜¯å¦å·²æœ‰ Streamlit UIï¼š[æ˜¯ / å¦]

è«‹åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š

### æ­¥é©Ÿ 1ï¼šå»ºç«‹ç›®éŒ„çµæ§‹
åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ä»¥ä¸‹ç›®éŒ„ï¼š
- prompts/ï¼ˆJSON å¿«å–ï¼‰
- prompts/baselines/ï¼ˆBaseline åŸºæº–ç‰ˆæœ¬ï¼Œä¸å¯åˆªé™¤ï¼‰
- prompts/backups/ï¼ˆè‡ªå‹•å‚™ä»½ï¼‰
- prompts/drafts/ï¼ˆUI è‰ç¨¿æš«å­˜ï¼Œå¯åˆªé™¤ï¼‰
- temp/versions/{YYYYMM}/ï¼ˆè¼¸å‡ºç‰ˆæœ¬å¿«ç…§ï¼‰
- utils/ï¼ˆå·¥å…·æ¨¡çµ„ï¼Œå¦‚ä¸å­˜åœ¨ï¼‰

### æ­¥é©Ÿ 2ï¼šå‰µå»ºæ ¸å¿ƒæ¨¡çµ„
å»ºç«‹ utils/prompt_manager.pyï¼Œå¯¦ä½œä»¥ä¸‹åŠŸèƒ½ï¼š
1. PromptManager é¡åˆ¥ï¼š
   - extract_prompts_from_script(script_path) - å¾ .py æå– PROMPT å¸¸æ•¸
   - get_prompts(report_type) - å–å¾— promptï¼ˆæ°¸é å¾è…³æœ¬æå–ï¼‰
   - save_prompts(report_type, prompts) - å„²å­˜åˆ° JSON å¿«å–
   - update_script_prompts(report_type, prompts) - å¯«å› .py è…³æœ¬
   - list_backups(stage_num) - åˆ—å‡ºæ‰€æœ‰å‚™ä»½
   - restore_from_backup(backup_path) - é‚„åŸå‚™ä»½
   - get_baseline(report_type) - è®€å– baseline åŸºæº–ç‰ˆæœ¬
   - save_baseline(report_type) - å°‡ç›®å‰è…³æœ¬è¨­ç‚º baseline
   - compare_with_baseline(report_type) - æ¯”è¼ƒç›®å‰è…³æœ¬èˆ‡ baseline å·®ç•°
   - restore_from_baseline(report_type) - å¾ baseline é‚„åŸè…³æœ¬

2. è¨­è¨ˆåŸå‰‡ï¼š
   - Prompt ä»¥ Python å¸¸æ•¸å½¢å¼å¯«åœ¨è…³æœ¬ä¸­ï¼ˆPROMPT_1 = """..."""ï¼‰
   - get_prompts() æ°¸é å¾ .py è…³æœ¬æå–ï¼ˆä¸ä¾è³´ JSON å¿«å–ï¼‰
   - JSON å¿«å–åƒ…ç”¨æ–¼è‰ç¨¿æš«å­˜ï¼Œä¸ä½œç‚ºè®€å–ä¾†æº
   - ä¿®æ”¹å‰è‡ªå‹•å‚™ä»½ .py å’Œ .json æª”æ¡ˆ
   - Baseline ç‚ºç©©å®šåƒè€ƒç‰ˆæœ¬ï¼Œä¸å¯åˆªé™¤åƒ…èƒ½è¦†è“‹

### æ­¥é©Ÿ 3ï¼šæƒæ Stage è…³æœ¬
æƒææˆ‘çš„ Stage è…³æœ¬ï¼ˆscripts/stages/stage*.pyï¼‰ï¼Œæ‰¾å‡ºæ‰€æœ‰ Promptï¼š
1. æå–æ‰€æœ‰ PROMPT_* å¸¸æ•¸
2. ç‚ºæ¯å€‹ Stage å»ºç«‹ prompts/stage{N}_prompts.json
3. è¨˜éŒ„æ¯å€‹ Prompt çš„ï¼š
   - è®Šæ•¸åç¨±ï¼ˆå¦‚ PROMPT_1ï¼‰
   - å…§å®¹
   - èµ·å§‹è¡Œè™Ÿï¼ˆç”¨æ–¼å¯«å›ï¼‰
   - å­—æ•¸ã€è¡Œæ•¸çµ±è¨ˆ

### æ­¥é©Ÿ 4ï¼šå»ºç«‹å…±ç”¨è³‡æ–™æ ¼å¼åŒ–æ¨¡çµ„ï¼ˆé‡è¦ï¼ï¼‰
å»ºç«‹ utils/data_formatter.pyï¼Œå¯¦ä½œè³‡æ–™æ ¼å¼åŒ–å‡½æ•¸ï¼š
1. å¾æ¯å€‹ Stage è…³æœ¬ä¸­æå–è³‡æ–™è¼‰å…¥å’Œæ ¼å¼åŒ–é‚è¼¯
2. å°‡é€™äº›é‚è¼¯æŠ½å–ç‚ºç¨ç«‹å‡½æ•¸ï¼ˆå¦‚ load_us_etf_dataã€format_market_trendsï¼‰
3. Stage è…³æœ¬å’Œ UI é è¦½éƒ½ä½¿ç”¨é€™äº›å…±ç”¨å‡½æ•¸
4. ç¢ºä¿é è¦½èˆ‡å¯¦éš›åŸ·è¡Œå®Œå…¨ä¸€è‡´

ç¯„ä¾‹çµæ§‹ï¼š
```python
# utils/data_formatter.py
def load_excel_data(file_path, year, month):
    """å¾ Excel è¼‰å…¥ä¸¦æ ¼å¼åŒ–æ•¸æ“šï¼ˆStage è…³æœ¬å’Œ UI é è¦½å…±ç”¨ï¼‰"""
    # è³‡æ–™è¼‰å…¥å’Œæ ¼å¼åŒ–é‚è¼¯
    return formatted_data
```

### æ­¥é©Ÿ 5ï¼šæ•´åˆ Streamlit UI
å¦‚æœå°ˆæ¡ˆå·²æœ‰ Streamlit UIï¼ˆå¦‚ ui_app.pyï¼‰ï¼š
1. åœ¨ç¾æœ‰ UI ä¸­æ–°å¢ã€ŒPrompt ç·¨è¼¯ã€é é¢
2. å¯¦ä½œåŠŸèƒ½ï¼š
   - é¸æ“‡ Stageï¼ˆä¸‹æ‹‰é¸å–®ï¼‰
   - é¡¯ç¤ºè©² Stage çš„æ‰€æœ‰ Promptï¼ˆtext_area ç·¨è¼¯å™¨ï¼‰
   - é¡¯ç¤ºå­—æ•¸ã€è¡Œæ•¸çµ±è¨ˆ
   - é¡¯ç¤ºä¿®æ”¹ç‹€æ…‹ï¼ˆModified / Savedï¼‰
   - æŒ‰éˆ•ï¼šå„²å­˜è‰ç¨¿ã€è¼‰å…¥è‰ç¨¿ã€æ›´æ–°è…³æœ¬ã€é‡æ–°è¼‰å…¥
   - è‰ç¨¿è¨˜éŒ„ï¼šBaseline ç½®é ‚ï¼ˆå¯è¼‰å…¥ï¼Œä¸å¯åˆªé™¤ï¼‰ï¼Œè‰ç¨¿å¯è¼‰å…¥å’Œåˆªé™¤ï¼ˆğŸ—‘ æŒ‰éˆ•ï¼‰
   - Baseline æ¯”è¼ƒï¼šé¡¯ç¤ºç›®å‰è…³æœ¬èˆ‡ Baseline çš„å·®ç•°ï¼ˆå·¦å³ä¸¦æ’ï¼‰ï¼Œå¯è¨­ç‚ºæ–° Baseline æˆ–å¾ Baseline é‚„åŸ
   - é è¦½åŠŸèƒ½ï¼šä½¿ç”¨ utils/data_formatter.py ç”Ÿæˆå¯¦éš›è®Šæ•¸æ›¿æ›å¾Œçš„ Prompt

å¦‚æœå°ˆæ¡ˆæ²’æœ‰ Streamlit UIï¼š
1. å»ºç«‹æ–°çš„ prompt_editor_ui.py
2. å¯¦ä½œåŸºæœ¬çš„ Prompt ç·¨è¼¯ä»‹é¢

### æ­¥é©Ÿ 6ï¼šæ•´åˆç‰ˆæœ¬ç®¡ç†ï¼ˆå¯é¸ä½†æ¨è–¦ï¼‰
å»ºç«‹ utils/version_manager.pyï¼Œå¯¦ä½œè¼¸å‡ºç‰ˆæœ¬ç®¡ç†ï¼š
1. VersionManager é¡åˆ¥ï¼š
   - snapshot_output(stage_num, output_md, version_id) - å¿«ç…§è¼¸å‡º
   - set_active_version(stage_num, version_id) - è¨­å®šä¸»è¦ç‰ˆæœ¬
   - get_active_version(stage_num) - å–å¾—ä¸»è¦ç‰ˆæœ¬
   - list_versions(stage_num) - åˆ—å‡ºæ‰€æœ‰ç‰ˆæœ¬
   - delete_version(stage_num, version_id) - åˆªé™¤ç‰ˆæœ¬

2. åœ¨æ¯å€‹ Stage è…³æœ¬åŸ·è¡ŒæˆåŠŸå¾Œï¼Œè‡ªå‹•å‘¼å« snapshot_output()

### æ­¥é©Ÿ 7ï¼šæ›´æ–° Stage è…³æœ¬
é‡æ§‹ Stage è…³æœ¬ï¼š
1. å°‡è³‡æ–™æ ¼å¼åŒ–é‚è¼¯ç§»åˆ° utils/data_formatter.py
2. åœ¨è…³æœ¬é–‹é ­ import å…±ç”¨å‡½æ•¸
3. åœ¨è…³æœ¬çµå°¾åŠ å…¥ç‰ˆæœ¬å¿«ç…§ï¼ˆå¦‚æœä½¿ç”¨ç‰ˆæœ¬ç®¡ç†ï¼‰

ç¯„ä¾‹ï¼š
```python
# scripts/stages/stage1_xxx.py

from utils.data_formatter import load_us_etf_data, format_market_trends
from utils.version_manager import VersionManager

PROMPT_1 = """
æ‚¨æ˜¯ä¸€ä½é‡‘èåˆ†æå¸«...
"""

def main(year, month):
    # ä½¿ç”¨å…±ç”¨å‡½æ•¸è¼‰å…¥è³‡æ–™
    data = load_us_etf_data(excel_file, year, month)

    # ä½¿ç”¨ Prompt å‘¼å« API
    result = api_manager.generate_content(PROMPT_1.format(data=data), ...)

    # å„²å­˜çµæœä¸¦å¿«ç…§
    save_output(result)
    VersionManager().snapshot_output(stage_num=1, output_md=result, version_id=f"v{timestamp}")
```

### æ­¥é©Ÿ 8ï¼šæ–°å¢è¼¸å…¥é©—è­‰ï¼ˆInput Validationï¼‰
ç‚ºæ¯å€‹ Stage è…³æœ¬æ–°å¢ check_inputs() å‡½æ•¸ï¼Œä¸¦åœ¨ Workflow ä¸­çµ±ä¸€å‘¼å«ï¼š
1. æ¯å€‹ Stage è…³æœ¬æ–°å¢ check_inputs(year, month)ï¼š
   - æª¢æŸ¥åœ–ç‰‡ã€Excelã€å‰ç½® Stage è¼¸å‡ºæ˜¯å¦å­˜åœ¨
   - å›å‚³ list[(level, message)]ï¼Œlevel ç‚º 'ERROR' æˆ– 'WARNING'
   - ERROR è¡¨ç¤ºå¿…è¦è¼¸å…¥ï¼ˆç¼ºå°‘æœƒå°è‡´å¤±æ•—ï¼‰
   - WARNING è¡¨ç¤ºå¯é¸è¼¸å…¥ï¼ˆç¼ºå°‘ä¸å½±éŸ¿åŸ·è¡Œï¼‰
2. åœ¨æ¯å€‹ Stage çš„ main() é–‹é ­å‘¼å« check_inputs() ä¸¦å°å‡ºçµæœ
3. åœ¨ Workflow ä¸­ç”¨ run_input_check(check_fn, year, month) çµ±ä¸€å‘¼å«
4. å°ä¾è³´å‰ç½® Stage çš„å ´æ™¯ï¼Œè€ƒæ…®è‡ªå‹•è£œè·‘ç¼ºå¤±ä¾è³´

ç¯„ä¾‹ï¼š
```python
def check_inputs(year, month):
    """æª¢æŸ¥æ‰€æœ‰è¼¸å…¥æ˜¯å¦å­˜åœ¨ï¼Œå›å‚³ [(level, message), ...]"""
    issues = []
    prefix = f"{year}{month:02d}"
    img = project_root / "images" / f"chart_{prefix}.png"
    if not img.exists():
        issues.append(("ERROR", f"åœ–ç‰‡ä¸å­˜åœ¨: {img.name}"))
    return issues
```

åƒè€ƒï¼šprompt_management_system_spec.yaml çš„ input_validation ç« ç¯€

### æ­¥é©Ÿ 9ï¼šå»ºç«‹æ¸¬è©¦è…³æœ¬
å»ºç«‹ test_prompt_manager.pyï¼š
1. æ¸¬è©¦ Prompt æå–ï¼ˆå¾ .py è…³æœ¬ï¼‰
2. æ¸¬è©¦ JSON å¿«å–è®€å¯«
3. æ¸¬è©¦å¯«å›è…³æœ¬åŠŸèƒ½
4. æ¸¬è©¦å‚™ä»½å’Œé‚„åŸ
5. æ¸¬è©¦å…±ç”¨è³‡æ–™æ ¼å¼åŒ–æ¨¡çµ„
6. æ¸¬è©¦ check_inputs() è¼¸å…¥é©—è­‰ï¼ˆç¼ºå°‘åœ–ç‰‡/Excel/å‰ç½®è¼¸å‡ºï¼‰
7. è¼¸å‡ºæ¸¬è©¦çµæœ

### æ­¥é©Ÿ 10ï¼šæ•´åˆå ±å‘Š
å®Œæˆå¾Œï¼Œè«‹æä¾›ï¼š
1. å»ºç«‹äº†å“ªäº›æ–°æª”æ¡ˆï¼ˆåˆ—å‡ºè·¯å¾‘ï¼‰
2. ä¿®æ”¹äº†å“ªäº›ç¾æœ‰æª”æ¡ˆ
3. å¾ Stage è…³æœ¬ä¸­æå–äº†å¤šå°‘å€‹ Prompt
4. å…±ç”¨è³‡æ–™æ ¼å¼åŒ–æ¨¡çµ„åŒ…å«å“ªäº›å‡½æ•¸
5. UI é è¦½åŠŸèƒ½æ˜¯å¦æ­£å¸¸é‹ä½œ
6. æ¸¬è©¦è…³æœ¬çš„åŸ·è¡Œçµæœ

åƒè€ƒæ–‡ä»¶ï¼š
- prompt_management_system_spec.yamlï¼ˆå®Œæ•´ç³»çµ±è¦æ ¼ - çµ¦ AI çœ‹ï¼‰
- README_PROMPT_SPEC.mdï¼ˆè©³ç´°ä½¿ç”¨æ–‡æª” - çµ¦äººé¡çœ‹ï¼‰

æ³¨æ„äº‹é …ï¼š
- Prompt å¿…é ˆä¿ç•™åœ¨ .py è…³æœ¬ä¸­ä½œç‚º single source of truth
- JSON å¿«å–åƒ…ç”¨æ–¼åŠ é€Ÿè¼‰å…¥ï¼Œä¸æ˜¯ä¸»è¦å­˜å„²
- ä¿®æ”¹è…³æœ¬å‰å¿…é ˆè‡ªå‹•å‚™ä»½
- ç¢ºä¿ utils/ å’Œæ‰€æœ‰å­ç›®éŒ„éƒ½æœ‰ __init__.py
- UI é è¦½èˆ‡å¯¦éš›åŸ·è¡Œå¿…é ˆä½¿ç”¨ç›¸åŒçš„è³‡æ–™æ ¼å¼åŒ–å‡½æ•¸
```

---

## ğŸ¯ ç°¡åŒ–ç‰ˆæŒ‡ä»¤ï¼ˆå¿«é€Ÿæ•´åˆï¼‰

```
è«‹å°‡ Prompt ç®¡ç†ç³»çµ±æ•´åˆåˆ°æˆ‘çš„å°ˆæ¡ˆï¼š

å°ˆæ¡ˆè·¯å¾‘ï¼š[ä½ çš„å°ˆæ¡ˆè·¯å¾‘]
Stage è…³æœ¬ç›®éŒ„ï¼š[å¦‚ scripts/stages/]

æ­¥é©Ÿï¼š
1. å»ºç«‹ç›®éŒ„çµæ§‹ï¼ˆprompts/, prompts/backups/, utils/ï¼‰
2. å»ºç«‹ utils/prompt_manager.pyï¼ˆPrompt æå–ã€JSON å¿«å–ã€å¯«å›è…³æœ¬ï¼‰
3. å»ºç«‹ utils/data_formatter.pyï¼ˆå…±ç”¨è³‡æ–™æ ¼å¼åŒ–æ¨¡çµ„ï¼‰
4. æƒæ Stage è…³æœ¬ï¼Œæå–æ‰€æœ‰ PROMPT å¸¸æ•¸
5. æ•´åˆåˆ°ç¾æœ‰ Streamlit UI æˆ–å»ºç«‹æ–° UI
6. å»ºç«‹æ¸¬è©¦è…³æœ¬é©—è­‰åŠŸèƒ½

åƒè€ƒï¼šprompt_management_system_spec.yaml
```

---

## ğŸ“‹ ä½¿ç”¨æ–¹å¼

### æ–¹æ³• 1ï¼šå®Œæ•´æ•´åˆï¼ˆæ¨è–¦ï¼‰
1. è¤‡è£½ä¸Šæ–¹ã€Œå®Œæ•´æ•´åˆæŒ‡ä»¤ã€å€å¡Š
2. å¡«å…¥ä½ çš„å°ˆæ¡ˆè³‡è¨Šï¼ˆè·¯å¾‘ã€Workflow é¡å‹ã€è…³æœ¬ä½ç½®ï¼‰
3. æä¾›çµ¦ AI åŠ©æ‰‹ï¼ˆClaudeã€ChatGPT ç­‰ï¼‰
4. AI æœƒè‡ªå‹•åŸ·è¡Œæ‰€æœ‰æ­¥é©Ÿä¸¦æä¾›å ±å‘Š

### æ–¹æ³• 2ï¼šå¿«é€Ÿæ•´åˆ
1. è¤‡è£½ã€Œç°¡åŒ–ç‰ˆæŒ‡ä»¤ã€å€å¡Š
2. å¡«å…¥åŸºæœ¬è³‡è¨Šï¼ˆå°ˆæ¡ˆè·¯å¾‘å’Œ Stage è…³æœ¬ç›®éŒ„ï¼‰
3. æä¾›çµ¦ AI åŠ©æ‰‹
4. é©åˆç°¡å–®å°ˆæ¡ˆçš„å¿«é€Ÿæ•´åˆ

### æ–¹æ³• 3ï¼šåˆ†éšæ®µæ•´åˆ
æ ¹æ“šä½ çš„éœ€æ±‚ï¼Œå¾å®Œæ•´æŒ‡ä»¤ä¸­é¸æ“‡éœ€è¦çš„æ­¥é©Ÿï¼š
- åªéœ€è¦ Prompt ç·¨è¼¯ï¼Ÿâ†’ åŸ·è¡Œæ­¥é©Ÿ 1-3ã€5
- éœ€è¦ç‰ˆæœ¬ç®¡ç†ï¼Ÿâ†’ åŸ·è¡Œæ‰€æœ‰æ­¥é©Ÿ
- éœ€è¦ UI é è¦½ï¼Ÿâ†’ åŸ·è¡Œæ­¥é©Ÿ 1-5ï¼ˆåŒ…å«å…±ç”¨è³‡æ–™æ ¼å¼åŒ–æ¨¡çµ„ï¼‰

---

## ğŸ”§ å¸¸è¦‹è‡ªè¨‚éœ€æ±‚

### éœ€æ±‚ 1ï¼šæ•´åˆåˆ°ç¾æœ‰ Streamlit UI

```
æˆ‘å·²ç¶“æœ‰ Streamlit UIï¼ˆui_app.pyï¼‰ï¼Œè«‹å°‡ Prompt ç·¨è¼¯åŠŸèƒ½æ•´åˆé€²å»ï¼š

æ­¥é©Ÿï¼š
1. å»ºç«‹ utils/prompt_manager.py
2. åœ¨ ui_app.py ä¸­æ–°å¢ã€ŒPrompt ç·¨è¼¯ã€é é¢ï¼ˆä½¿ç”¨ st.sidebar æˆ– tabï¼‰
3. å¯¦ä½œ Prompt ç·¨è¼¯ä»‹é¢ï¼ˆé¸æ“‡ Stageã€ç·¨è¼¯ã€å„²å­˜ã€é è¦½ï¼‰
4. å»ºç«‹ utils/data_formatter.py ç¢ºä¿é è¦½ä¸€è‡´æ€§
5. åœ¨ç¾æœ‰é é¢ä¸­ä½¿ç”¨ data_formatter å‡½æ•¸

åƒè€ƒï¼šprompt_management_system_spec.yaml çš„ shared_formatters ç« ç¯€
```

### éœ€æ±‚ 2ï¼šåƒ…æå–å’Œç®¡ç† Promptï¼ˆä¸éœ€è¦ UIï¼‰

```
æˆ‘åªéœ€è¦ Prompt çš„æå–å’Œç®¡ç†åŠŸèƒ½ï¼Œä¸éœ€è¦ UIï¼š

æ­¥é©Ÿï¼š
1. å»ºç«‹ utils/prompt_manager.py
2. æƒæ Stage è…³æœ¬ï¼Œæå– PROMPT å¸¸æ•¸
3. å»ºç«‹ JSON å¿«å–
4. æä¾› CLI å·¥å…·ï¼ˆå¯é¸ï¼‰ç”¨æ–¼ç·¨è¼¯å’Œå¯«å›

åƒè€ƒï¼šprompt_management_system_spec.yaml çš„ PromptManager é¡åˆ¥
```

### éœ€æ±‚ 3ï¼šåŠ å…¥ç‰ˆæœ¬ç®¡ç†å’Œè¼¸å‡ºå¿«ç…§

```
è«‹åŠ å…¥è¼¸å‡ºç‰ˆæœ¬ç®¡ç†åŠŸèƒ½ï¼š

æ­¥é©Ÿï¼š
1. å»ºç«‹ utils/version_manager.py
2. åœ¨æ¯å€‹ Stage è…³æœ¬åŸ·è¡Œå¾Œè‡ªå‹•å¿«ç…§è¼¸å‡º
3. å»ºç«‹ temp/versions/{YYYYMM}/stage{N}/ ç›®éŒ„çµæ§‹
4. å¯¦ä½œç‰ˆæœ¬åˆ‡æ›å’Œåˆªé™¤åŠŸèƒ½
5. åœ¨ UI ä¸­é¡¯ç¤ºç‰ˆæœ¬åˆ—è¡¨ï¼ˆå¯é¸ï¼‰

åƒè€ƒï¼šprompt_management_system_spec.yaml çš„ Version Manager ç« ç¯€
```

### éœ€æ±‚ 4ï¼šç¢ºä¿ UI é è¦½èˆ‡å¯¦éš›åŸ·è¡Œä¸€è‡´

```
æˆ‘çš„ UI é è¦½çµæœèˆ‡å¯¦éš›åŸ·è¡Œä¸ä¸€è‡´ï¼Œè«‹å¹«æˆ‘ä¿®æ­£ï¼š

å•é¡Œåˆ†æï¼š
- åŸå› ï¼šUI å’Œ Stage è…³æœ¬å„è‡ªå¯¦ä½œäº†è³‡æ–™æ ¼å¼åŒ–é‚è¼¯
- è§£æ±ºï¼šå»ºç«‹å…±ç”¨è³‡æ–™æ ¼å¼åŒ–æ¨¡çµ„

æ­¥é©Ÿï¼š
1. å»ºç«‹ utils/data_formatter.py
2. å¾ Stage è…³æœ¬ä¸­æå–æ‰€æœ‰è³‡æ–™è¼‰å…¥å’Œæ ¼å¼åŒ–å‡½æ•¸
3. å°‡é€™äº›å‡½æ•¸ç§»åˆ° data_formatter.py
4. Stage è…³æœ¬å’Œ UI é è¦½éƒ½ import ä¸¦ä½¿ç”¨ç›¸åŒå‡½æ•¸
5. æ¸¬è©¦é è¦½èˆ‡å¯¦éš›åŸ·è¡Œæ˜¯å¦ä¸€è‡´

åƒè€ƒï¼šprompt_management_system_spec.yaml çš„ shared_formatters ç« ç¯€
```

---

## ğŸŒŸ é—œéµè¨­è¨ˆåŸå‰‡

### 1. Prompt å³ç¨‹å¼ç¢¼
- Prompt ç›´æ¥å¯«åœ¨ .py è…³æœ¬ä¸­ä½œç‚º module-level å¸¸æ•¸
- JSON å¿«å–åƒ…ç”¨æ–¼åŠ é€Ÿè¼‰å…¥ï¼Œä¸æ˜¯ä¸»è¦å­˜å„²
- Single Source of Truthï¼š.py è…³æœ¬

### 2. é è¦½ä¸€è‡´æ€§ï¼ˆPreview Consistencyï¼‰
- UI é è¦½èˆ‡å¯¦éš›åŸ·è¡Œä½¿ç”¨ç›¸åŒçš„è³‡æ–™æ ¼å¼åŒ–å‡½æ•¸
- å»ºç«‹ utils/data_formatter.py å…±ç”¨æ¨¡çµ„
- é¿å…é‡è¤‡å¯¦ä½œå°è‡´ä¸ä¸€è‡´

### 3. å®‰å…¨çš„ä¿®æ”¹æµç¨‹
- ä¿®æ”¹ .py è…³æœ¬å‰è‡ªå‹•å‚™ä»½ï¼ˆ.py å’Œ .jsonï¼‰
- è‰ç¨¿ç³»çµ±ï¼šå¯ä»¥æš«å­˜ä¿®æ”¹è€Œä¸å½±éŸ¿åŸ·è¡Œ
- æ”¯æ´é‚„åŸå‚™ä»½

### 4. ç‰ˆæœ¬ç®¡ç†
- æ¯æ¬¡åŸ·è¡Œå¾Œè‡ªå‹•å¿«ç…§è¼¸å‡º
- å¯åˆ‡æ›ä¸»è¦ç‰ˆæœ¬ï¼ˆactive versionï¼‰
- æ”¯æ´ç‰ˆæœ¬æ¯”è¼ƒå’Œåˆªé™¤

---

## ğŸ“– å»¶ä¼¸é–±è®€

- **å®Œæ•´è¦æ ¼**ï¼šprompt_management_system_spec.yaml
- **ä½¿ç”¨æ–‡æª”**ï¼šREADME_PROMPT_SPEC.md
- **ç›®éŒ„çµæ§‹**ï¼šè¦‹ spec.yaml çš„ directory_structure ç« ç¯€
- **å…±ç”¨æ ¼å¼åŒ–æ¶æ§‹**ï¼šè¦‹ spec.yaml çš„ shared_formatters ç« ç¯€

---

**ç‰ˆæœ¬ï¼š** 1.4.0
**æœ€å¾Œæ›´æ–°ï¼š** 2026-02-18
**é©ç”¨å°ˆæ¡ˆï¼š** å¤šéšæ®µ AI Workflowï¼ˆå ±å‘Šç”Ÿæˆã€å…§å®¹åˆ†æã€æ•¸æ“šè™•ç†ç­‰ï¼‰
